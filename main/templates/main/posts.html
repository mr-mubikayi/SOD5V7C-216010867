{% extends 'main/base.html' %}

{% block title %}{{ title }} - Django Demo Site{% endblock %}

{% block content %}
    <h2>{{ title }}</h2>
    
    <div style="background-color: #e3f2fd; padding: 15px; border-radius: 5px; margin: 20px 0; text-align: center;">
        <h3>Blog Statistics</h3>
        <div style="display: flex; justify-content: space-around; flex-wrap: wrap;">
            <div style="background-color: white; padding: 15px; margin: 5px; border-radius: 5px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                <strong>Total Posts:</strong> {{ total_posts }}
            </div>
            <div style="background-color: white; padding: 15px; margin: 5px; border-radius: 5px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                <strong>Popular Posts:</strong> {{ popular_count }}
            </div>
        </div>
    </div>

    {% if posts %}
        <h3>All Posts ({{ posts|length }})</h3>
        {% for post in posts %}
            <div style="background-color: #f8f9fa; padding: 20px; margin: 15px 0; border-radius: 8px; border-left: 4px solid #007bff;">
                <h4>{{ forloop.counter }}. {{ post.title }}</h4>
                <p><strong>Author:</strong> {{ post.author }}</p>
                <p><strong>Published:</strong> {{ post.publication_date }}</p>
                <p><strong>Views:</strong> {{ post.views }}</p>
                <p>{{ post.content|truncatewords:30 }}</p>
            </div>
        {% endfor %}
    {% else %}
        <p>No posts available.</p>
    {% endif %}

    {% if popular_posts %}
        <h3>Popular Posts ({{ popular_count }} found)</h3>
        {% for post in popular_posts %}
            <div style="background-color: #fff3cd; padding: 15px; margin: 10px 0; border-radius: 5px; border-left: 4px solid #ffc107;">
                <h4>{{ post.title }}</h4>
                <p><strong>Author:</strong> {{ post.author }} | <strong>Views:</strong> {{ post.views }}</p>
                <p>{{ post.content|truncatewords:20 }}</p>
            </div>
        {% endfor %}
    {% endif %}
{% endblock %}
